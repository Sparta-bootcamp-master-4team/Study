# 5/14
# iOS 앱에서 데이터를 저장하는 방법에는 어떤 것들이 있나요?
iOS 앱에서 데이터를 저장하는 방식은 데이터의 규모, 보안 수준, 영속성, 그리고 구현 복잡도에 따라 다양하게 선택할 수 있습니다. 대표적인 저장 방식은 다음과 같습니다

---
## UserDefaults
간단한 key-value 형태의 데이터를 저장할 수 있는 저장소입니다. 사용이 간편하고 빠르지만, 대용량 데이터나 민감한 정보 저장에는 적합하지 않습니다.  
주로 사용자 설정, 로그인 여부, 앱 최초 실행 여부 등을 저장하는 데 사용됩니다.

---
## File System
앱의 샌드박스 내에서 파일을 직접 읽고 쓸 수 있는 방식입니다. JSON, plist, binary 등 다양한 포맷으로 저장이 가능하며, 이미지나 다운로드된 데이터처럼 구조화되지 않은 파일을 저장할 때 유용합니다.  
다만 파일 경로 관리와 읽기/쓰기 처리를 직접 구현해야 합니다.

---
## Keychain
암호화된 보안 저장소로, 민감한 정보를 안전하게 저장할 수 있습니다. 높은 보안성을 제공하며, 액세스 토큰이나 비밀번호 같은 인증 정보를 저장할 때 주로 사용됩니다.

---
## Core Data
Apple이 제공하는 객체 그래프 및 영속성 관리 프레임워크입니다. 복잡한 데이터 모델, 관계 설정, 쿼리 등을 지원하며, 관계형 구조를 가진 대규모 로컬 데이터를 관리하기에 적합합니다.  
다만 초기 설정이 복잡하고 학습 곡선이 다소 있습니다.

---
## CloudKit
Apple의 클라우드 저장소로, 기기간 데이터 동기화, 백업, 공유 기능 등을 제공합니다. 시스템 통합이 잘 되어 있고 보안성과 신뢰성이 높지만, 네트워크 연결 및 Apple ID 연동이 필요합니다.

---
## SQLite
범용적인 경량 SQL 데이터베이스로, 정형화된 데이터를 SQL 쿼리를 통해 직접 저장하고 조회할 수 있습니다.  
직접적인 제어가 가능하고 성능이 뛰어나며, 플랫폼 간 호환성이 좋습니다.  
하지만 테이블 정의, 쿼리 작성, 매핑 등의 작업을 수동으로 처리해야 하므로 구현 복잡도가 다소 높습니다.  
간단하고 구조적인 데이터 저장에 적합합니다.

---
## Realm
모바일에 최적화된 NoSQL 기반의 로컬 데이터베이스로, 직관적인 API와 빠른 성능이 특징입니다.  
객체 기반으로 데이터를 저장하고 관리할 수 있으며, 데이터 변경 감지, 쓰레드 안전성, 실시간 업데이트 등의 기능을 제공합니다.  
초기 설정이 간편하고 생산성이 높아 빠르게 앱을 개발할 때 유리하며, Core Data보다 가벼운 대안으로 많이 사용됩니다.  
다만 외부 라이브러리에 대한 의존성이 있으며, 앱 용량이 증가할 수 있습니다.

---
# 추가 질문
### UserDefaults의 사용 시 주의할 점은 무엇인가요?
UserDefaults는 간단한 key-value 데이터를 저장하는 데 매우 유용하지만, 몇 가지 주의할 점이 있습니다.

첫째, 보안에 취약하기 때문에 민감한 정보를 저장해서는 안 됩니다. 예를 들어, 로그인 토큰이나 사용자 비밀번호 등은 반드시 Keychain과 같은 보안 저장소를 사용하는 것이 권장됩니다.

둘째, 대용량 데이터를 저장하는 데 적합하지 않습니다. UserDefaults는 앱 실행 시 메모리에 로드되기 때문에 너무 많은 데이터를 저장하면 성능 저하가 발생할 수 있습니다. 예를 들어, 이미지 데이터나 큰 JSON 문자열을 저장하는 것은 피해야 합니다.

셋째, 동기적인 저장 방식이기 때문에 저장 타이밍에 유의해야 합니다. set(_:forKey:) 메서드는 즉시 메모리에 반영되지만, 디스크에 비동기적으로 저장되기 때문에 synchronize()를 호출하지 않으면 앱이 강제 종료되는 경우 데이터가 손실될 수 있습니다. 다만, synchronize()는 현재는 거의 사용되지 않으며, 시스템이 자동으로 주기적으로 저장합니다. 따라서 중요한 설정은 앱 상태 변화 시점(ex. applicationWillResignActive)에 저장하는 것이 좋습니다.

마지막으로, UserDefaults는 앱이 삭제되면 함께 삭제되므로, 영구 저장이 필요한 데이터에는 적합하지 않습니다. 단기적 설정 값이나 플래그 등을 저장하는 데 사용하는 것이 가장 이상적입니다.

---
### Keychain은 어떤 데이터를 저장하기에 적합한가요?
Keychain은 사용자의 민감한 정보를 안전하게 저장하기 위한 보안 저장소로, 암호화된 형태로 데이터를 관리합니다.

가장 적합한 데이터는 인증 및 보안과 관련된 민감 정보입니다. 대표적으로는 다음과 같은 항목들이 있습니다:
- **사용자 로그인 정보**: 예를 들어 OAuth 토큰, 사용자 ID, 비밀번호 등은 네트워크를 통해 재전송 없이 재사용되어야 하며, 외부 노출 시 보안 이슈가 크기 때문에 반드시 안전하게 보호되어야 합니다.
- **인증서 및 개인 키**: 디지털 서명이나 보안 통신에서 사용하는 비공개 키, 인증서 등도 Keychain을 통해 안전하게 저장할 수 있습니다.
- **생체인증 상태 값**: Face ID, Touch ID와 연동된 상태 정보나 인증 토큰을 저장할 때도 Keychain을 활용합니다.
- 
Keychain은 Apple이 제공하는 시스템 수준의 보안 인프라를 기반으로 작동하며, 데이터는 자동으로 암호화되고, 장치의 보안 정책(예: 기기 잠금 해제 상태, 생체 인증 등)에 따라 접근 권한을 제한할 수 있습니다.
또한 Keychain은 앱 간 공유(Keychain Access Groups) 기능을 통해 같은 개발자 계정의 앱들 사이에서 인증 정보를 공유하는 데에도 활용할 수 있습니다.

요약하자면, Keychain은 보안이 중요한 소량의 민감 정보를 장기적으로 안전하게 저장할 때 가장 적합하며, 앱의 인증 흐름을 구성할 때 핵심적인 역할을 합니다.

---
### Core Data와 SQLite의 차이점은 무엇이며, 각각 언제 사용하면 좋나요?
Core Data와 SQLite는 모두 로컬 데이터 저장을 위한 기술이지만, 지향하는 목적과 사용 방식에 있어서 명확한 차이가 있습니다.

Core Data는 Apple이 제공하는 객체 지향적인 영속성 프레임워크로, 데이터베이스보다는 객체 그래프 관리에 더 가깝습니다. Swift/Objective-C 객체를 직접 관리하고, 내부적으로 SQLite를 백엔드로 사용할 수도 있지만, 개발자는 이를 직접 다루지 않아도 됩니다. 데이터 모델링 도구를 통해 엔티티와 관계를 정의할 수 있으며, 데이터 변경 감지(NSFetchedResultsController), Undo/Redo, 관계형 객체 간의 연결 등 고급 기능을 제공합니다. 따라서 복잡한 데이터 구조나 관계를 가지는 앱, 예를 들어 메모 앱, SNS 피드, 데이터 동기화가 필요한 앱 등에 적합합니다.

반면 SQLite는 범용적인 경량 SQL 데이터베이스로, 데이터 저장과 조회를 직접 SQL 쿼리로 수행해야 합니다. 구조는 명확하고 성능이 우수하며, 플랫폼 간 호환성이 좋아 iOS 외의 다른 플랫폼에서도 활용 가능합니다. 그러나 테이블 설계, 쿼리 작성, 데이터 매핑 등을 모두 수작업으로 처리해야 하므로 개발 부담이 증가할 수 있습니다. 따라서 데이터 구조가 단순하고, 정형화된 쿼리 중심의 처리나 크로스 플랫폼 호환성이 중요한 경우, 혹은 직접 DB 구조를 제어해야 하는 상황에 적합합니다.
